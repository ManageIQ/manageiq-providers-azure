---
http_interactions:
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 1afe7497-713e-4a32-b68a-d42153b06eec
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:34 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"kind":"APIResourceList","groupVersion":"v1","resources":[{"name":"bindings","singularName":"","namespaced":true,"kind":"Binding","verbs":["create"]},{"name":"componentstatuses","singularName":"","namespaced":false,"kind":"ComponentStatus","verbs":["get","list"],"shortNames":["cs"]},{"name":"configmaps","singularName":"","namespaced":true,"kind":"ConfigMap","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["cm"],"storageVersionHash":"qFsyl6wFWjQ="},{"name":"endpoints","singularName":"","namespaced":true,"kind":"Endpoints","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["ep"],"storageVersionHash":"fWeeMqaN/OA="},{"name":"events","singularName":"","namespaced":true,"kind":"Event","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["ev"],"storageVersionHash":"r2yiGXH7wu8="},{"name":"limitranges","singularName":"","namespaced":true,"kind":"LimitRange","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["limits"],"storageVersionHash":"EBKMFVe6cwo="},{"name":"namespaces","singularName":"","namespaced":false,"kind":"Namespace","verbs":["create","delete","get","list","patch","update","watch"],"shortNames":["ns"],"storageVersionHash":"Q3oi5N2YM8M="},{"name":"namespaces/finalize","singularName":"","namespaced":false,"kind":"Namespace","verbs":["update"]},{"name":"namespaces/status","singularName":"","namespaced":false,"kind":"Namespace","verbs":["get","patch","update"]},{"name":"nodes","singularName":"","namespaced":false,"kind":"Node","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["no"],"storageVersionHash":"XwShjMxG9Fs="},{"name":"nodes/proxy","singularName":"","namespaced":false,"kind":"NodeProxyOptions","verbs":["create","delete","get","patch","update"]},{"name":"nodes/status","singularName":"","namespaced":false,"kind":"Node","verbs":["get","patch","update"]},{"name":"persistentvolumeclaims","singularName":"","namespaced":true,"kind":"PersistentVolumeClaim","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["pvc"],"storageVersionHash":"QWTyNDq0dC4="},{"name":"persistentvolumeclaims/status","singularName":"","namespaced":true,"kind":"PersistentVolumeClaim","verbs":["get","patch","update"]},{"name":"persistentvolumes","singularName":"","namespaced":false,"kind":"PersistentVolume","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["pv"],"storageVersionHash":"HN/zwEC+JgM="},{"name":"persistentvolumes/status","singularName":"","namespaced":false,"kind":"PersistentVolume","verbs":["get","patch","update"]},{"name":"pods","singularName":"","namespaced":true,"kind":"Pod","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["po"],"categories":["all"],"storageVersionHash":"xPOwRZ+Yhw8="},{"name":"pods/attach","singularName":"","namespaced":true,"kind":"PodAttachOptions","verbs":["create","get"]},{"name":"pods/binding","singularName":"","namespaced":true,"kind":"Binding","verbs":["create"]},{"name":"pods/eviction","singularName":"","namespaced":true,"group":"policy","version":"v1beta1","kind":"Eviction","verbs":["create"]},{"name":"pods/exec","singularName":"","namespaced":true,"kind":"PodExecOptions","verbs":["create","get"]},{"name":"pods/log","singularName":"","namespaced":true,"kind":"Pod","verbs":["get"]},{"name":"pods/portforward","singularName":"","namespaced":true,"kind":"PodPortForwardOptions","verbs":["create","get"]},{"name":"pods/proxy","singularName":"","namespaced":true,"kind":"PodProxyOptions","verbs":["create","delete","get","patch","update"]},{"name":"pods/status","singularName":"","namespaced":true,"kind":"Pod","verbs":["get","patch","update"]},{"name":"podtemplates","singularName":"","namespaced":true,"kind":"PodTemplate","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"storageVersionHash":"LIXB2x4IFpk="},{"name":"replicationcontrollers","singularName":"","namespaced":true,"kind":"ReplicationController","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["rc"],"categories":["all"],"storageVersionHash":"Jond2If31h0="},{"name":"replicationcontrollers/scale","singularName":"","namespaced":true,"group":"autoscaling","version":"v1","kind":"Scale","verbs":["get","patch","update"]},{"name":"replicationcontrollers/status","singularName":"","namespaced":true,"kind":"ReplicationController","verbs":["get","patch","update"]},{"name":"resourcequotas","singularName":"","namespaced":true,"kind":"ResourceQuota","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["quota"],"storageVersionHash":"8uhSgffRX6w="},{"name":"resourcequotas/status","singularName":"","namespaced":true,"kind":"ResourceQuota","verbs":["get","patch","update"]},{"name":"secrets","singularName":"","namespaced":true,"kind":"Secret","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"storageVersionHash":"S6u1pOWzb84="},{"name":"serviceaccounts","singularName":"","namespaced":true,"kind":"ServiceAccount","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"shortNames":["sa"],"storageVersionHash":"pbx9ZvyFpBE="},{"name":"serviceaccounts/token","singularName":"","namespaced":true,"group":"authentication.k8s.io","version":"v1","kind":"TokenRequest","verbs":["create"]},{"name":"services","singularName":"","namespaced":true,"kind":"Service","verbs":["create","delete","get","list","patch","update","watch"],"shortNames":["svc"],"categories":["all"],"storageVersionHash":"0/CO1lhkEBI="},{"name":"services/proxy","singularName":"","namespaced":true,"kind":"ServiceProxyOptions","verbs":["create","delete","get","patch","update"]},{"name":"services/status","singularName":"","namespaced":true,"kind":"Service","verbs":["get","patch","update"]}]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/nodes?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 3f67f911-3061-4767-8ffd-12ec504776f5
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"kind":"NodeList","apiVersion":"v1","metadata":{"resourceVersion":"1384680"},"items":[{"metadata":{"name":"aks-agentpool-17806587-vmss000001","uid":"5661a8d7-6bff-41ad-af17-a7f3388ac4fc","resourceVersion":"1384166","creationTimestamp":"2021-08-12T18:41:44Z","labels":{"agentpool":"agentpool","beta.kubernetes.io/arch":"amd64","beta.kubernetes.io/instance-type":"Standard_DS2_v2","beta.kubernetes.io/os":"linux","failure-domain.beta.kubernetes.io/region":"eastus2","failure-domain.beta.kubernetes.io/zone":"eastus2-2","kubernetes.azure.com/cluster":"MC_agrare-resource-group_agrare-aks_eastus2","kubernetes.azure.com/mode":"system","kubernetes.azure.com/node-image-version":"AKSUbuntu-1804gen2containerd-2021.07.25","kubernetes.azure.com/os-sku":"Ubuntu","kubernetes.azure.com/role":"agent","kubernetes.io/arch":"amd64","kubernetes.io/hostname":"aks-agentpool-17806587-vmss000001","kubernetes.io/os":"linux","kubernetes.io/role":"agent","node-role.kubernetes.io/agent":"","node.kubernetes.io/instance-type":"Standard_DS2_v2","storageprofile":"managed","storagetier":"Premium_LRS","topology.disk.csi.azure.com/zone":"eastus2-2","topology.kubernetes.io/region":"eastus2","topology.kubernetes.io/zone":"eastus2-2"},"annotations":{"csi.volume.kubernetes.io/nodeid":"{\"disk.csi.azure.com\":\"aks-agentpool-17806587-vmss000001\",\"file.csi.azure.com\":\"aks-agentpool-17806587-vmss000001\"}","node.alpha.kubernetes.io/ttl":"0","volumes.kubernetes.io/controller-managed-attach-detach":"true"},"managedFields":[{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:42:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:csi.volume.kubernetes.io/nodeid":{},"f:volumes.kubernetes.io/controller-managed-attach-detach":{}},"f:labels":{".":{},"f:agentpool":{},"f:beta.kubernetes.io/arch":{},"f:beta.kubernetes.io/instance-type":{},"f:beta.kubernetes.io/os":{},"f:failure-domain.beta.kubernetes.io/region":{},"f:failure-domain.beta.kubernetes.io/zone":{},"f:kubernetes.azure.com/cluster":{},"f:kubernetes.azure.com/mode":{},"f:kubernetes.azure.com/node-image-version":{},"f:kubernetes.azure.com/os-sku":{},"f:kubernetes.azure.com/role":{},"f:kubernetes.io/arch":{},"f:kubernetes.io/hostname":{},"f:kubernetes.io/os":{},"f:node.kubernetes.io/instance-type":{},"f:storageprofile":{},"f:storagetier":{},"f:topology.disk.csi.azure.com/zone":{},"f:topology.kubernetes.io/region":{},"f:topology.kubernetes.io/zone":{}}},"f:spec":{"f:providerID":{}},"f:status":{"f:allocatable":{"f:ephemeral-storage":{}},"f:capacity":{"f:ephemeral-storage":{}},"f:conditions":{"k:{\"type\":\"DiskPressure\"}":{"f:lastHeartbeatTime":{}},"k:{\"type\":\"MemoryPressure\"}":{"f:lastHeartbeatTime":{}},"k:{\"type\":\"PIDPressure\"}":{"f:lastHeartbeatTime":{}},"k:{\"type\":\"Ready\"}":{"f:lastHeartbeatTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{}}},"f:config":{}}}},{"manager":"kubectl-label","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:42:26Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:kubernetes.io/role":{},"f:node-role.kubernetes.io/agent":{}}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:42:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{"f:node.alpha.kubernetes.io/ttl":{}}},"f:spec":{"f:podCIDR":{},"f:podCIDRs":{".":{},"v:\"10.244.1.0/24\"":{}}},"f:status":{"f:conditions":{"k:{\"type\":\"NetworkUnavailable\"}":{".":{},"f:lastHeartbeatTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}}}]},"spec":{"podCIDR":"10.244.1.0/24","podCIDRs":["10.244.1.0/24"],"providerID":"azure:///subscriptions/AZURE_SUBSCRIPTION_ID/resourceGroups/mc_agrare-resource-group_agrare-aks_eastus2/providers/Microsoft.Compute/virtualMachineScaleSets/aks-agentpool-17806587-vmss/virtualMachines/1"},"status":{"capacity":{"attachable-volumes-azure-disk":"8","cpu":"2","ephemeral-storage":"129900528Ki","hugepages-1Gi":"0","hugepages-2Mi":"0","memory":"7120616Ki","pods":"110"},"allocatable":{"attachable-volumes-azure-disk":"8","cpu":"1900m","ephemeral-storage":"119716326407","hugepages-1Gi":"0","hugepages-2Mi":"0","memory":"4675304Ki","pods":"110"},"conditions":[{"type":"NetworkUnavailable","status":"False","lastHeartbeatTime":"2021-08-12T18:42:40Z","lastTransitionTime":"2021-08-12T18:42:40Z","reason":"RouteCreated","message":"RouteController
        created a route"},{"type":"MemoryPressure","status":"False","lastHeartbeatTime":"2021-08-18T17:45:21Z","lastTransitionTime":"2021-08-12T18:41:44Z","reason":"KubeletHasSufficientMemory","message":"kubelet
        has sufficient memory available"},{"type":"DiskPressure","status":"False","lastHeartbeatTime":"2021-08-18T17:45:21Z","lastTransitionTime":"2021-08-12T18:41:44Z","reason":"KubeletHasNoDiskPressure","message":"kubelet
        has no disk pressure"},{"type":"PIDPressure","status":"False","lastHeartbeatTime":"2021-08-18T17:45:21Z","lastTransitionTime":"2021-08-12T18:41:44Z","reason":"KubeletHasSufficientPID","message":"kubelet
        has sufficient PID available"},{"type":"Ready","status":"True","lastHeartbeatTime":"2021-08-18T17:45:21Z","lastTransitionTime":"2021-08-12T18:41:55Z","reason":"KubeletReady","message":"kubelet
        is posting ready status. AppArmor enabled"}],"addresses":[{"type":"Hostname","address":"aks-agentpool-17806587-vmss000001"},{"type":"InternalIP","address":"10.240.0.5"}],"daemonEndpoints":{"kubeletEndpoint":{"Port":10250}},"nodeInfo":{"machineID":"45b94979343b410ea46aa3f1f7cdc626","systemUUID":"ef3e3584-8efb-4327-b1f0-ff741d993cde","bootID":"05b2aca7-4fd7-4db3-8b2c-ad5247fd59ac","kernelVersion":"5.4.0-1055-azure","osImage":"Ubuntu
        18.04.5 LTS","containerRuntimeVersion":"containerd://1.4.8+azure","kubeletVersion":"v1.21.2","kubeProxyVersion":"v1.21.2","operatingSystem":"linux","architecture":"amd64"},"images":[{"names":["mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06112021-1"],"sizeBytes":331689060},{"names":["mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06112021"],"sizeBytes":330099815},{"names":["mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod05202021-hotfix"],"sizeBytes":271471426},{"names":["mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod05202021"],"sizeBytes":269703297},{"names":["mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod03262021"],"sizeBytes":264732875},{"names":["mcr.microsoft.com/oss/kubernetes/ingress/nginx-ingress-controller:0.19.0"],"sizeBytes":166352383},{"names":["mcr.microsoft.com/aks/hcp/hcp-tunnel-front:master.210623.2"],"sizeBytes":147750148},{"names":["mcr.microsoft.com/oss/calico/node:v3.8.9.5"],"sizeBytes":101794833},{"names":["mcr.microsoft.com/oss/kubernetes/ingress/nginx-ingress-controller:0.47.0"],"sizeBytes":101445696},{"names":["mcr.microsoft.com/oss/kubernetes/autoscaler/cluster-proportional-autoscaler:1.3.0_v0.0.5"],"sizeBytes":101194562},{"names":["mcr.microsoft.com/aks/hcp/tunnel-openvpn:master.210623.2"],"sizeBytes":96125176},{"names":["mcr.microsoft.com/aks/hcp/tunnel-openvpn:master.210524.1"],"sizeBytes":95879501},{"names":["mcr.microsoft.com/oss/kubernetes/exechealthz:1.2_v0.0.5"],"sizeBytes":94348102},{"names":["mcr.microsoft.com/oss/calico/node:v3.8.9.2"],"sizeBytes":93537927},{"names":["mcr.microsoft.com/aks/acc/sgx-attestation:2.0"],"sizeBytes":91841669},{"names":["mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.4.0"],"sizeBytes":91324193},{"names":["mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.2.0"],"sizeBytes":89103171},{"names":["mcr.microsoft.com/azure-application-gateway/kubernetes-ingress:1.0.1-rc3"],"sizeBytes":86839805},{"names":["mcr.microsoft.com/azure-application-gateway/kubernetes-ingress:1.2.0"],"sizeBytes":86488586},{"names":["mcr.microsoft.com/aks/hcp/tunnel-openvpn:master.210427.1"],"sizeBytes":86120048},{"names":["mcr.microsoft.com/azure-application-gateway/kubernetes-ingress:1.3.0"],"sizeBytes":81252495},{"names":["mcr.microsoft.com/aks/hcp/hcp-tunnel-front:master.210721.1"],"sizeBytes":79597945},{"names":["mcr.microsoft.com/azure-application-gateway/kubernetes-ingress:1.4.0"],"sizeBytes":79586703},{"names":["mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.4.0"],"sizeBytes":78795016},{"names":["mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.2.0"],"sizeBytes":76527179},{"names":["mcr.microsoft.com/containernetworking/azure-npm:v1.1.8"],"sizeBytes":75025803},{"names":["mcr.microsoft.com/containernetworking/azure-npm:v1.2.2_hotfix"],"sizeBytes":73533889},{"names":["mcr.microsoft.com/containernetworking/azure-npm:v1.3.1"],"sizeBytes":72242894},{"names":["mcr.microsoft.com/containernetworking/azure-npm:v1.2.8"],"sizeBytes":70622822},{"names":["mcr.microsoft.com/oss/nvidia/k8s-device-plugin:v0.9.0"],"sizeBytes":67291599},{"names":["mcr.microsoft.com/oss/kubernetes/dashboard:v2.0.1"],"sizeBytes":66415836},{"names":["mcr.microsoft.com/oss/kubernetes/dashboard:v2.0.0-rc7"],"sizeBytes":65965658},{"names":["mcr.microsoft.com/containernetworking/azure-npm:v1.2.1"],"sizeBytes":64123775},{"names":["mcr.microsoft.com/oss/calico/cni:v3.8.9.3"],"sizeBytes":63581323},{"names":["mcr.microsoft.com/containernetworking/networkmonitor:v1.1.8"],"sizeBytes":63154716},{"names":["mcr.microsoft.com/oss/calico/cni:v3.8.9.2"],"sizeBytes":61626312},{"names":["mcr.microsoft.com/oss/calico/node:v3.18.1"],"sizeBytes":60500885},{"names":["mcr.microsoft.com/oss/calico/node:v3.17.2"],"sizeBytes":58419768},{"names":["mcr.microsoft.com/containernetworking/networkmonitor:v1.1.8_hotfix","mcr.microsoft.com/containernetworking/networkmonitor:v1.1.8post2"],"sizeBytes":56368756},{"names":["mcr.microsoft.com/oss/calico/node:v3.19.0"],"sizeBytes":55228749},{"names":["mcr.microsoft.com/oss/kubernetes/kube-proxy@sha256:684d697f867035011751bbb2c52918325961964590b0ca76c3e0422a3344b5d7","mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.21.2-hotfix.20210715.1"],"sizeBytes":54192113},{"names":["mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.21.2"],"sizeBytes":52508583},{"names":["mcr.microsoft.com/oss/kubernetes/dashboard:v2.0.0-rc3"],"sizeBytes":50803639},{"names":["mcr.microsoft.com/oss/kubernetes-csi/secrets-store/driver:v0.0.19"],"sizeBytes":49759361},{"names":["mcr.microsoft.com/oss/azure/aad-pod-identity/nmi:v1.7.5"],"sizeBytes":49704644},{"names":["mcr.microsoft.com/oss/kubernetes-csi/secrets-store/driver:v0.0.21"],"sizeBytes":49372390},{"names":["mcr.microsoft.com/oss/azure/aad-pod-identity/nmi:v1.7.4"],"sizeBytes":48108311},{"names":["mcr.microsoft.com/oss/kubernetes/kubernetes-dashboard:v1.10.1"],"sizeBytes":44907744},{"names":["mcr.microsoft.com/aks/acc/sgx-device-plugin:1.0"],"sizeBytes":42023095},{"names":["mcr.microsoft.com/oss/azure/secrets-store/provider-azure:0.0.12"],"sizeBytes":41699566}],"config":{}}}]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/namespaces?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 8e3b84ea-7ba5-491b-8020-3fd17225c0aa
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"kind":"NamespaceList","apiVersion":"v1","metadata":{"resourceVersion":"1384681"},"items":[{"metadata":{"name":"default","uid":"d6ed5673-46af-4166-a9b9-a794f0675098","resourceVersion":"205","creationTimestamp":"2021-08-12T18:40:28Z","labels":{"kubernetes.io/metadata.name":"default"},"managedFields":[{"manager":"kube-apiserver","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:40:28Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:kubernetes.io/metadata.name":{}}}}}]},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}},{"metadata":{"name":"kube-node-lease","uid":"30afbfa2-867c-49a5-8c37-4129104c5241","resourceVersion":"39","creationTimestamp":"2021-08-12T18:40:25Z","labels":{"kubernetes.io/metadata.name":"kube-node-lease"},"managedFields":[{"manager":"kube-apiserver","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:40:25Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:kubernetes.io/metadata.name":{}}}}}]},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}},{"metadata":{"name":"kube-public","uid":"1a7d90f4-59b0-4896-810c-7095b606b587","resourceVersion":"19","creationTimestamp":"2021-08-12T18:40:25Z","labels":{"kubernetes.io/metadata.name":"kube-public"},"managedFields":[{"manager":"kube-apiserver","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:40:25Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:kubernetes.io/metadata.name":{}}}}}]},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}},{"metadata":{"name":"kube-system","uid":"b784fc69-337a-4771-a391-88ed2c977eb8","resourceVersion":"524","creationTimestamp":"2021-08-12T18:40:25Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","control-plane":"true","kubernetes.io/cluster-service":"true","kubernetes.io/metadata.name":"kube-system"},"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Namespace\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"control-plane\":\"true\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"kube-system\"}}\n"},"managedFields":[{"manager":"kube-apiserver","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:40:25Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:kubernetes.io/metadata.name":{}}}}},{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{"f:addonmanager.kubernetes.io/mode":{},"f:control-plane":{},"f:kubernetes.io/cluster-service":{}}}}}]},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}}]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/resourcequotas?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 0c2dcd5f-da9f-439b-b89b-9a6a4b378217
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Content-Length:
      - '99'
    body:
      encoding: UTF-8
      string: '{"kind":"ResourceQuotaList","apiVersion":"v1","metadata":{"resourceVersion":"1384681"},"items":[]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/limitranges?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 9a64d4ee-3e94-47a3-8ddf-f3188f8f0c23
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Content-Length:
      - '96'
    body:
      encoding: UTF-8
      string: '{"kind":"LimitRangeList","apiVersion":"v1","metadata":{"resourceVersion":"1384681"},"items":[]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/replicationcontrollers?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - d545333e-4b2f-48d7-a4d5-ee27704e810b
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Content-Length:
      - '107'
    body:
      encoding: UTF-8
      string: '{"kind":"ReplicationControllerList","apiVersion":"v1","metadata":{"resourceVersion":"1384681"},"items":[]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/persistentvolumeclaims?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 76dbe423-3644-46ec-95c8-afde23318764
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Content-Length:
      - '107'
    body:
      encoding: UTF-8
      string: '{"kind":"PersistentVolumeClaimList","apiVersion":"v1","metadata":{"resourceVersion":"1384683"},"items":[]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/persistentvolumes?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - b5ca639a-b449-4c30-b5ed-f6899c111004
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Content-Length:
      - '102'
    body:
      encoding: UTF-8
      string: '{"kind":"PersistentVolumeList","apiVersion":"v1","metadata":{"resourceVersion":"1384683"},"items":[]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/pods?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 828b14b2-2808-4abd-8dbb-571a4198f019
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"kind":"PodList","apiVersion":"v1","metadata":{"resourceVersion":"1384683"},"items":[{"metadata":{"name":"azure-ip-masq-agent-7bln9","generateName":"azure-ip-masq-agent-","namespace":"kube-system","uid":"f0b17c05-0ae3-4258-8aed-322c224347c1","resourceVersion":"945","creationTimestamp":"2021-08-12T18:41:44Z","labels":{"controller-revision-hash":"7b5b7b9888","k8s-app":"azure-ip-masq-agent","pod-template-generation":"1","tier":"node"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"azure-ip-masq-agent","uid":"5b5e693d-951e-4cbd-9dc9-4a13c3b0ece8","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:generateName":{},"f:labels":{".":{},"f:controller-revision-hash":{},"f:k8s-app":{},"f:pod-template-generation":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5b5e693d-951e-4cbd-9dc9-4a13c3b0ece8\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"azure-ip-masq-agent\"}":{".":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:privileged":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/config\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/run/xtables.lock\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostNetwork":{},"f:nodeSelector":{".":{},"f:beta.kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"azure-ip-masq-agent-config-volume\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"iptableslock\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.240.0.5\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"azure-ip-masq-agent-config-volume","configMap":{"name":"azure-ip-masq-agent-config","defaultMode":420}},{"name":"iptableslock","hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"}},{"name":"kube-api-access-tz5xd","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"azure-ip-masq-agent","image":"mcr.microsoft.com/oss/kubernetes/ip-masq-agent:v2.5.0.6","env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"azure-aks-hostname"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"500m","memory":"250Mi"},"requests":{"cpu":"100m","memory":"50Mi"}},"volumeMounts":[{"name":"azure-ip-masq-agent-config-volume","mountPath":"/etc/config"},{"name":"iptableslock","mountPath":"/run/xtables.lock"},{"name":"kube-api-access-tz5xd","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"default","serviceAccount":"default","nodeName":"aks-agentpool-17806587-vmss000001","hostNetwork":true,"securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["aks-agentpool-17806587-vmss000001"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists","effect":"NoExecute"},{"operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:45Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:51Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:51Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:44Z"}],"hostIP":"10.240.0.5","podIP":"10.240.0.5","podIPs":[{"ip":"10.240.0.5"}],"startTime":"2021-08-12T18:41:45Z","containerStatuses":[{"name":"azure-ip-masq-agent","state":{"running":{"startedAt":"2021-08-12T18:41:50Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes/ip-masq-agent:v2.5.0.6","imageID":"sha256:f5d20ff1fbfb75a3760461eb181cb7536261b0cca0962a70b260d4cc896dc762","containerID":"containerd://8d1cdae0db7ae374347b6ccc718267e96f7cef413c946a9369316e379b066d78","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"coredns-8869cbf9b-2kqg2","generateName":"coredns-8869cbf9b-","namespace":"kube-system","uid":"c96e66cc-7f5c-45df-9edb-2f80bb9d37a8","resourceVersion":"6632","creationTimestamp":"2021-08-12T19:12:12Z","labels":{"k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","pod-template-hash":"8869cbf9b","version":"v20"},"annotations":{"prometheus.io/port":"9153"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"coredns-8869cbf9b","uid":"ed36115f-a14b-4093-b845-878e9b4d2cf6","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T19:12:12Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{}},"f:generateName":{},"f:labels":{".":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:pod-template-hash":{},"f:version":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ed36115f-a14b-4093-b845-878e9b4d2cf6\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{}},"f:podAntiAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"coredns\"}":{".":{},"f:args":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":53,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":53,\"protocol\":\"UDP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":9153,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:allowPrivilegeEscalation":{},"f:capabilities":{".":{},"f:add":{},"f:drop":{}},"f:procMount":{},"f:readOnlyRootFilesystem":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/coredns\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/coredns/custom\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/tmp\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:nodeSelector":{".":{},"f:beta.kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"config-volume\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:items":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"custom-config-volume\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{},"f:optional":{}},"f:name":{}},"k:{\"name\":\"tmp\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T19:12:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.1.8\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"config-volume","configMap":{"name":"coredns","items":[{"key":"Corefile","path":"Corefile"}],"defaultMode":420}},{"name":"custom-config-volume","configMap":{"name":"coredns-custom","defaultMode":420,"optional":true}},{"name":"tmp","emptyDir":{}},{"name":"kube-api-access-jwvv9","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"coredns","image":"mcr.microsoft.com/oss/kubernetes/coredns:1.8.3","args":["-conf","/etc/coredns/Corefile"],"ports":[{"name":"dns","containerPort":53,"protocol":"UDP"},{"name":"dns-tcp","containerPort":53,"protocol":"TCP"},{"name":"metrics","containerPort":9153,"protocol":"TCP"}],"env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"memory":"500Mi"},"requests":{"cpu":"100m","memory":"70Mi"}},"volumeMounts":[{"name":"config-volume","readOnly":true,"mountPath":"/etc/coredns"},{"name":"custom-config-volume","readOnly":true,"mountPath":"/etc/coredns/custom"},{"name":"tmp","mountPath":"/tmp"},{"name":"kube-api-access-jwvv9","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":5},"readinessProbe":{"httpGet":{"path":"/ready","port":8181,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"add":["NET_BIND_SERVICE"],"drop":["all"]},"readOnlyRootFilesystem":true,"allowPrivilegeEscalation":false,"procMount":"Default"}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"Default","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"coredns","serviceAccount":"coredns","nodeName":"aks-agentpool-17806587-vmss000001","securityContext":{},"affinity":{"nodeAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":100,"preference":{"matchExpressions":[{"key":"kubernetes.azure.com/mode","operator":"In","values":["system"]}]}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":10,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"k8s-app","operator":"In","values":["kube-dns"]}]},"topologyKey":"failure-domain.beta.kubernetes.io/zone"}},{"weight":5,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"k8s-app","operator":"In","values":["kube-dns"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"},{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T19:12:12Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T19:12:13Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T19:12:13Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T19:12:12Z"}],"hostIP":"10.240.0.5","podIP":"10.244.1.8","podIPs":[{"ip":"10.244.1.8"}],"startTime":"2021-08-12T19:12:12Z","containerStatuses":[{"name":"coredns","state":{"running":{"startedAt":"2021-08-12T19:12:13Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes/coredns:1.8.3","imageID":"sha256:7da9bc8c0cb59b9467b734143a1d06105768b086d857ad0d476a5d0a2d1f1daf","containerID":"containerd://018f984825aa2ca86c55d47ef4558b5d2176654dc1ecebe650264ba33d077726","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"coredns-8869cbf9b-qtsm7","generateName":"coredns-8869cbf9b-","namespace":"kube-system","uid":"e3b80b65-a247-4fe6-b173-28b32f1e1e19","resourceVersion":"3987","creationTimestamp":"2021-08-12T18:56:57Z","labels":{"k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","pod-template-hash":"8869cbf9b","version":"v20"},"annotations":{"prometheus.io/port":"9153"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"coredns-8869cbf9b","uid":"ed36115f-a14b-4093-b845-878e9b4d2cf6","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:56:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{}},"f:generateName":{},"f:labels":{".":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:pod-template-hash":{},"f:version":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ed36115f-a14b-4093-b845-878e9b4d2cf6\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{}},"f:podAntiAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"coredns\"}":{".":{},"f:args":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":53,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":53,\"protocol\":\"UDP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":9153,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:allowPrivilegeEscalation":{},"f:capabilities":{".":{},"f:add":{},"f:drop":{}},"f:procMount":{},"f:readOnlyRootFilesystem":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/coredns\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/coredns/custom\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/tmp\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:nodeSelector":{".":{},"f:beta.kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"config-volume\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:items":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"custom-config-volume\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{},"f:optional":{}},"f:name":{}},"k:{\"name\":\"tmp\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:57:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.1.7\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"config-volume","configMap":{"name":"coredns","items":[{"key":"Corefile","path":"Corefile"}],"defaultMode":420}},{"name":"custom-config-volume","configMap":{"name":"coredns-custom","defaultMode":420,"optional":true}},{"name":"tmp","emptyDir":{}},{"name":"kube-api-access-ccwbl","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"coredns","image":"mcr.microsoft.com/oss/kubernetes/coredns:1.8.3","args":["-conf","/etc/coredns/Corefile"],"ports":[{"name":"dns","containerPort":53,"protocol":"UDP"},{"name":"dns-tcp","containerPort":53,"protocol":"TCP"},{"name":"metrics","containerPort":9153,"protocol":"TCP"}],"env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"memory":"500Mi"},"requests":{"cpu":"100m","memory":"70Mi"}},"volumeMounts":[{"name":"config-volume","readOnly":true,"mountPath":"/etc/coredns"},{"name":"custom-config-volume","readOnly":true,"mountPath":"/etc/coredns/custom"},{"name":"tmp","mountPath":"/tmp"},{"name":"kube-api-access-ccwbl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":5},"readinessProbe":{"httpGet":{"path":"/ready","port":8181,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"add":["NET_BIND_SERVICE"],"drop":["all"]},"readOnlyRootFilesystem":true,"allowPrivilegeEscalation":false,"procMount":"Default"}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"Default","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"coredns","serviceAccount":"coredns","nodeName":"aks-agentpool-17806587-vmss000001","securityContext":{},"affinity":{"nodeAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":100,"preference":{"matchExpressions":[{"key":"kubernetes.azure.com/mode","operator":"In","values":["system"]}]}}]},"podAntiAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":10,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"k8s-app","operator":"In","values":["kube-dns"]}]},"topologyKey":"failure-domain.beta.kubernetes.io/zone"}},{"weight":5,"podAffinityTerm":{"labelSelector":{"matchExpressions":[{"key":"k8s-app","operator":"In","values":["kube-dns"]}]},"topologyKey":"kubernetes.io/hostname"}}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"},{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:56:57Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:57:07Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:57:07Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:56:57Z"}],"hostIP":"10.240.0.5","podIP":"10.244.1.7","podIPs":[{"ip":"10.244.1.7"}],"startTime":"2021-08-12T18:56:57Z","containerStatuses":[{"name":"coredns","state":{"running":{"startedAt":"2021-08-12T18:56:58Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes/coredns:1.8.3","imageID":"sha256:7da9bc8c0cb59b9467b734143a1d06105768b086d857ad0d476a5d0a2d1f1daf","containerID":"containerd://aafdb5f705e6b71d4785f7cc108869f802066d6aea2d4ba3294fe6c2f18dfcc1","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"coredns-autoscaler-549956c48c-dsb4f","generateName":"coredns-autoscaler-549956c48c-","namespace":"kube-system","uid":"02b5382e-5647-4c66-8e27-94e554f4a395","resourceVersion":"1028","creationTimestamp":"2021-08-12T18:41:06Z","labels":{"k8s-app":"coredns-autoscaler","pod-template-hash":"549956c48c"},"annotations":{"cluster-autoscaler.kubernetes.io/safe-to-evict":"true","seccomp.security.alpha.kubernetes.io/pod":"runtime/default"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"coredns-autoscaler-549956c48c","uid":"1b65994e-508b-4e6c-ae24-006ff79209c4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:cluster-autoscaler.kubernetes.io/safe-to-evict":{},"f:seccomp.security.alpha.kubernetes.io/pod":{}},"f:generateName":{},"f:labels":{".":{},"f:k8s-app":{},"f:pod-template-hash":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"1b65994e-508b-4e6c-ae24-006ff79209c4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"autoscaler\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:resources":{".":{},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:nodeSelector":{".":{},"f:beta.kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:seccompProfile":{"f:type":{}}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.1.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"kube-api-access-n5wjt","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"autoscaler","image":"mcr.microsoft.com/oss/kubernetes/autoscaler/cluster-proportional-autoscaler:1.8.3","command":["/cluster-proportional-autoscaler","--namespace=kube-system","--configmap=coredns-autoscaler","--target=deployment/coredns","--default-params={\"ladder\":{\"coresToReplicas\":[[1,2],[512,3],[1024,4],[2048,5]],\"nodesToReplicas\":[[1,2],[8,3],[16,4],[32,5]]}}","--logtostderr=true","--v=2"],"env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"requests":{"cpu":"20m","memory":"10Mi"}},"volumeMounts":[{"name":"kube-api-access-n5wjt","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/last-poll","port":8080,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"Default","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"coredns-autoscaler","serviceAccount":"coredns-autoscaler","nodeName":"aks-agentpool-17806587-vmss000001","securityContext":{"seccompProfile":{"type":"RuntimeDefault"}},"affinity":{"nodeAffinity":{"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":100,"preference":{"matchExpressions":[{"key":"kubernetes.azure.com/mode","operator":"In","values":["system"]}]}}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:56Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:58Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:58Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:56Z"}],"hostIP":"10.240.0.5","podIP":"10.244.1.3","podIPs":[{"ip":"10.244.1.3"}],"startTime":"2021-08-12T18:41:56Z","containerStatuses":[{"name":"autoscaler","state":{"running":{"startedAt":"2021-08-12T18:41:57Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes/autoscaler/cluster-proportional-autoscaler:1.8.3","imageID":"sha256:cfb93326278fdad0d75931baef3412cb5eb59ab292bd993d50a448ef2e5eadac","containerID":"containerd://19e749b3c8abb1d04c78bf06e43c1a2e93f44e6ea437d9224c7481f571e1fcac","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"csi-azuredisk-node-sbr2m","generateName":"csi-azuredisk-node-","namespace":"kube-system","uid":"603e8cbe-b7f2-4604-bfd6-c295d899f59c","resourceVersion":"970","creationTimestamp":"2021-08-12T18:41:44Z","labels":{"app":"csi-azuredisk-node","controller-revision-hash":"9c75cf85c","pod-template-generation":"1"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"csi-azuredisk-node","uid":"5da5f872-8b07-4efb-b07e-9304d165676a","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:generateName":{},"f:labels":{".":{},"f:app":{},"f:controller-revision-hash":{},"f:pod-template-generation":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"5da5f872-8b07-4efb-b07e-9304d165676a\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"azuredisk\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"AZURE_CREDENTIAL_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CSI_ENDPOINT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"KUBE_NODE_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":29603,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:hostPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":29605,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:hostPort":{},"f:name":{},"f:protocol":{}}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:privileged":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/csi\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/dev\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/kubernetes/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/sys/bus/scsi/devices\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/sys/class/scsi_host/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/kubelet/\"}":{".":{},"f:mountPath":{},"f:mountPropagation":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/waagent/ManagedIdentity-Settings\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}}},"k:{\"name\":\"liveness-probe\"}":{".":{},"f:args":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/csi\"}":{".":{},"f:mountPath":{},"f:name":{}}}},"k:{\"name\":\"node-driver-registrar\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"ADDRESS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"DRIVER_REG_SOCK_PATH\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/csi\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/registration\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostNetwork":{},"f:nodeSelector":{".":{},"f:kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"azure-cred\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"device-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"mountpoint-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"msi\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"registration-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"scsi-host-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"socket-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"sys-devices-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.240.0.5\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"socket-dir","hostPath":{"path":"/var/lib/kubelet/plugins/disk.csi.azure.com","type":"DirectoryOrCreate"}},{"name":"mountpoint-dir","hostPath":{"path":"/var/lib/kubelet/","type":"DirectoryOrCreate"}},{"name":"registration-dir","hostPath":{"path":"/var/lib/kubelet/plugins_registry/","type":"DirectoryOrCreate"}},{"name":"azure-cred","hostPath":{"path":"/etc/kubernetes/","type":"Directory"}},{"name":"msi","hostPath":{"path":"/var/lib/waagent/ManagedIdentity-Settings","type":""}},{"name":"device-dir","hostPath":{"path":"/dev","type":"Directory"}},{"name":"sys-devices-dir","hostPath":{"path":"/sys/bus/scsi/devices","type":"Directory"}},{"name":"scsi-host-dir","hostPath":{"path":"/sys/class/scsi_host/","type":"Directory"}},{"name":"kube-api-access-gq7lz","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"liveness-probe","image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.3.0","args":["--csi-address=/csi/csi.sock","--probe-timeout=3s","--health-port=29603","--v=2"],"env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"100m","memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"volumeMounts":[{"name":"socket-dir","mountPath":"/csi"},{"name":"kube-api-access-gq7lz","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"node-driver-registrar","image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.1.0","args":["--csi-address=$(ADDRESS)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--v=2"],"env":[{"name":"ADDRESS","value":"/csi/csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"/var/lib/kubelet/plugins/disk.csi.azure.com/csi.sock"},{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"100m","memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"volumeMounts":[{"name":"socket-dir","mountPath":"/csi"},{"name":"registration-dir","mountPath":"/registration"},{"name":"kube-api-access-gq7lz","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"lifecycle":{"preStop":{"exec":{"command":["/bin/sh","-c","rm
        -rf /registration/disk.csi.azure.com-reg.sock /csi/csi.sock"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"azuredisk","image":"mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.4.0","args":["--v=2","--endpoint=$(CSI_ENDPOINT)","--nodeid=$(KUBE_NODE_NAME)","--metrics-address=0.0.0.0:29605","--enable-perf-optimization=true"],"ports":[{"name":"healthz","hostPort":29603,"containerPort":29603,"protocol":"TCP"},{"name":"metrics","hostPort":29605,"containerPort":29605,"protocol":"TCP"}],"env":[{"name":"AZURE_CREDENTIAL_FILE","value":"/etc/kubernetes/azure.json"},{"name":"CSI_ENDPOINT","value":"unix:///csi/csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"azure-aks-hostname"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"200m","memory":"200Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"volumeMounts":[{"name":"socket-dir","mountPath":"/csi"},{"name":"mountpoint-dir","mountPath":"/var/lib/kubelet/","mountPropagation":"Bidirectional"},{"name":"azure-cred","mountPath":"/etc/kubernetes/"},{"name":"msi","readOnly":true,"mountPath":"/var/lib/waagent/ManagedIdentity-Settings"},{"name":"device-dir","mountPath":"/dev"},{"name":"sys-devices-dir","mountPath":"/sys/bus/scsi/devices"},{"name":"scsi-host-dir","mountPath":"/sys/class/scsi_host/"},{"name":"kube-api-access-gq7lz","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":5},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirstWithHostNet","nodeSelector":{"kubernetes.io/os":"linux"},"serviceAccountName":"csi-azuredisk-node-sa","serviceAccount":"csi-azuredisk-node-sa","nodeName":"aks-agentpool-17806587-vmss000001","hostNetwork":true,"securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["aks-agentpool-17806587-vmss000001"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists","effect":"NoExecute"},{"operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:45Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:53Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:53Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:44Z"}],"hostIP":"10.240.0.5","podIP":"10.240.0.5","podIPs":[{"ip":"10.240.0.5"}],"startTime":"2021-08-12T18:41:45Z","containerStatuses":[{"name":"azuredisk","state":{"running":{"startedAt":"2021-08-12T18:41:52Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes-csi/azuredisk-csi:v1.4.0","imageID":"sha256:d2a950d0e13246c69d3d0c434d165b1ae0a47b16d1333b70f61ef7469a4be69e","containerID":"containerd://20a94ffd660bb0190b84244eea90cdac029db61c5007421411349243e789f740","started":true},{"name":"liveness-probe","state":{"running":{"startedAt":"2021-08-12T18:41:50Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.3.0","imageID":"sha256:818253ea87165db555efe4117469f1590d97e19c645bda2fb59d56fece163064","containerID":"containerd://421497a90e910b779fd5a7e8b408d1067f22aa7e4507374698abb85ced4642cd","started":true},{"name":"node-driver-registrar","state":{"running":{"startedAt":"2021-08-12T18:41:51Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.1.0","imageID":"sha256:c242cbd9dc72c73f3f9df1170e4a3af6124219900ead74c818d5b62e421a2d3a","containerID":"containerd://d83c0aac775842952b76143986874da78c41ada46d0f54466a4192b8b7b66a30","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"csi-azurefile-node-sfwz2","generateName":"csi-azurefile-node-","namespace":"kube-system","uid":"886f9879-ab59-4bfe-8112-769fc1f987f1","resourceVersion":"968","creationTimestamp":"2021-08-12T18:41:44Z","labels":{"app":"csi-azurefile-node","controller-revision-hash":"f7c76b77","pod-template-generation":"1"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"csi-azurefile-node","uid":"371540cd-c6ac-4461-ac64-3902fb7dfc22","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:generateName":{},"f:labels":{".":{},"f:app":{},"f:controller-revision-hash":{},"f:pod-template-generation":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"371540cd-c6ac-4461-ac64-3902fb7dfc22\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"azurefile\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"AZURE_CREDENTIAL_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CSI_ENDPOINT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"KUBE_NODE_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":29613,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:hostPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":29615,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:hostPort":{},"f:name":{},"f:protocol":{}}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:privileged":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/csi\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/dev\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/kubernetes/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/kubelet/\"}":{".":{},"f:mountPath":{},"f:mountPropagation":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/waagent/ManagedIdentity-Settings\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}}},"k:{\"name\":\"liveness-probe\"}":{".":{},"f:args":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/csi\"}":{".":{},"f:mountPath":{},"f:name":{}}}},"k:{\"name\":\"node-driver-registrar\"}":{".":{},"f:args":{},"f:env":{".":{},"k:{\"name\":\"ADDRESS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"DRIVER_REG_SOCK_PATH\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/csi\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/registration\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostNetwork":{},"f:nodeSelector":{".":{},"f:kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"azure-cred\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"device-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"mountpoint-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"msi\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"registration-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"socket-dir\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.240.0.5\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"socket-dir","hostPath":{"path":"/var/lib/kubelet/plugins/file.csi.azure.com","type":"DirectoryOrCreate"}},{"name":"mountpoint-dir","hostPath":{"path":"/var/lib/kubelet/","type":"DirectoryOrCreate"}},{"name":"registration-dir","hostPath":{"path":"/var/lib/kubelet/plugins_registry/","type":"DirectoryOrCreate"}},{"name":"azure-cred","hostPath":{"path":"/etc/kubernetes/","type":"Directory"}},{"name":"msi","hostPath":{"path":"/var/lib/waagent/ManagedIdentity-Settings","type":""}},{"name":"device-dir","hostPath":{"path":"/dev","type":"Directory"}},{"name":"kube-api-access-6qwp6","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"liveness-probe","image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.3.0","args":["--csi-address=/csi/csi.sock","--probe-timeout=3s","--health-port=29613","--v=2"],"env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"100m","memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"volumeMounts":[{"name":"socket-dir","mountPath":"/csi"},{"name":"kube-api-access-6qwp6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"node-driver-registrar","image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.1.0","args":["--csi-address=$(ADDRESS)","--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)","--v=2"],"env":[{"name":"ADDRESS","value":"/csi/csi.sock"},{"name":"DRIVER_REG_SOCK_PATH","value":"/var/lib/kubelet/plugins/file.csi.azure.com/csi.sock"},{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"100m","memory":"100Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"volumeMounts":[{"name":"socket-dir","mountPath":"/csi"},{"name":"registration-dir","mountPath":"/registration"},{"name":"kube-api-access-6qwp6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"lifecycle":{"preStop":{"exec":{"command":["/bin/sh","-c","rm
        -rf /registration/file.csi.azure.com-reg.sock /csi/csi.sock"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"azurefile","image":"mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.4.0","args":["--v=2","--endpoint=$(CSI_ENDPOINT)","--nodeid=$(KUBE_NODE_NAME)","--metrics-address=0.0.0.0:29615"],"ports":[{"name":"healthz","hostPort":29613,"containerPort":29613,"protocol":"TCP"},{"name":"metrics","hostPort":29615,"containerPort":29615,"protocol":"TCP"}],"env":[{"name":"AZURE_CREDENTIAL_FILE","value":"/etc/kubernetes/azure.json"},{"name":"CSI_ENDPOINT","value":"unix:///csi/csi.sock"},{"name":"KUBE_NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}},{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"azure-aks-hostname"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"400m","memory":"200Mi"},"requests":{"cpu":"10m","memory":"20Mi"}},"volumeMounts":[{"name":"socket-dir","mountPath":"/csi"},{"name":"mountpoint-dir","mountPath":"/var/lib/kubelet/","mountPropagation":"Bidirectional"},{"name":"azure-cred","mountPath":"/etc/kubernetes/"},{"name":"msi","readOnly":true,"mountPath":"/var/lib/waagent/ManagedIdentity-Settings"},{"name":"device-dir","mountPath":"/dev"},{"name":"kube-api-access-6qwp6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":"healthz","scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":5},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirstWithHostNet","nodeSelector":{"kubernetes.io/os":"linux"},"serviceAccountName":"csi-azurefile-node-sa","serviceAccount":"csi-azurefile-node-sa","nodeName":"aks-agentpool-17806587-vmss000001","hostNetwork":true,"securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["aks-agentpool-17806587-vmss000001"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists","effect":"NoExecute"},{"operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:45Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:53Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:53Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:45Z"}],"hostIP":"10.240.0.5","podIP":"10.240.0.5","podIPs":[{"ip":"10.240.0.5"}],"startTime":"2021-08-12T18:41:45Z","containerStatuses":[{"name":"azurefile","state":{"running":{"startedAt":"2021-08-12T18:41:52Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes-csi/azurefile-csi:v1.4.0","imageID":"sha256:7bc9813611e467ab385aaf36987d271b6dc4a65733824c2ea2f7d76c19ebaa28","containerID":"containerd://8b492758a62f9dd272b38dcb2bf7f2d69919f6f806ac69017fef7fa46afd240c","started":true},{"name":"liveness-probe","state":{"running":{"startedAt":"2021-08-12T18:41:50Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes-csi/livenessprobe:v2.3.0","imageID":"sha256:818253ea87165db555efe4117469f1590d97e19c645bda2fb59d56fece163064","containerID":"containerd://445b3d32e8f8bb54f25c996b421e08d88fb035b272311e0b6948634ada4af9c5","started":true},{"name":"node-driver-registrar","state":{"running":{"startedAt":"2021-08-12T18:41:51Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar:v2.1.0","imageID":"sha256:c242cbd9dc72c73f3f9df1170e4a3af6124219900ead74c818d5b62e421a2d3a","containerID":"containerd://795ca233fa73de1b5193adb0dbb319eca415b2f5eeca5678da7f15db92dd55cd","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"kube-proxy-sj4t5","generateName":"kube-proxy-","namespace":"kube-system","uid":"6ff1bcd8-102a-4794-bc68-5dad3b5baea7","resourceVersion":"947","creationTimestamp":"2021-08-12T18:41:44Z","labels":{"component":"kube-proxy","controller-revision-hash":"569d4d5844","pod-template-generation":"1","tier":"node"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"kube-proxy","uid":"ba0ec65e-e74d-4335-b97b-1d9eafdb960c","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:generateName":{},"f:labels":{".":{},"f:component":{},"f:controller-revision-hash":{},"f:pod-template-generation":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ba0ec65e-e74d-4335-b97b-1d9eafdb960c\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"kube-proxy\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:requests":{".":{},"f:cpu":{}}},"f:securityContext":{".":{},"f:privileged":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/kubernetes/certs\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/run/xtables.lock\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/kubelet\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostNetwork":{},"f:nodeSelector":{".":{},"f:beta.kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"certificates\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"iptableslock\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"kubeconfig\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.240.0.5\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"kubeconfig","hostPath":{"path":"/var/lib/kubelet","type":""}},{"name":"certificates","hostPath":{"path":"/etc/kubernetes/certs","type":""}},{"name":"iptableslock","hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"}},{"name":"kube-api-access-jxqdl","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"kube-proxy","image":"mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.21.2-hotfix.20210715.1","command":["kube-proxy","--metrics-bind-address=0.0.0.0:10249","--kubeconfig=/var/lib/kubelet/kubeconfig","--cluster-cidr=10.244.0.0/16","--v=3"],"env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"requests":{"cpu":"100m"}},"volumeMounts":[{"name":"kubeconfig","readOnly":true,"mountPath":"/var/lib/kubelet"},{"name":"certificates","readOnly":true,"mountPath":"/etc/kubernetes/certs"},{"name":"iptableslock","mountPath":"/run/xtables.lock"},{"name":"kube-api-access-jxqdl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"kube-proxy","serviceAccount":"kube-proxy","nodeName":"aks-agentpool-17806587-vmss000001","hostNetwork":true,"securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["aks-agentpool-17806587-vmss000001"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists","effect":"NoExecute"},{"operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:45Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:51Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:51Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:44Z"}],"hostIP":"10.240.0.5","podIP":"10.240.0.5","podIPs":[{"ip":"10.240.0.5"}],"startTime":"2021-08-12T18:41:45Z","containerStatuses":[{"name":"kube-proxy","state":{"running":{"startedAt":"2021-08-12T18:41:50Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/oss/kubernetes/kube-proxy:v1.21.2-hotfix.20210715.1","imageID":"mcr.microsoft.com/oss/kubernetes/kube-proxy@sha256:684d697f867035011751bbb2c52918325961964590b0ca76c3e0422a3344b5d7","containerID":"containerd://25ba003641c72c7ec3a1357ef468b6ef77cd94964934d28ed35a8c984f139e46","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"metrics-server-7f469c787-4cd7r","generateName":"metrics-server-7f469c787-","namespace":"kube-system","uid":"1001c0d7-7603-4eb3-adbd-8bdf25be5d82","resourceVersion":"1117587","creationTimestamp":"2021-08-12T18:41:04Z","labels":{"k8s-app":"metrics-server","pod-template-hash":"7f469c787"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"metrics-server-7f469c787","uid":"790b6d61-5837-48d5-89a6-f76add1d03cc","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:generateName":{},"f:labels":{".":{},"f:k8s-app":{},"f:pod-template-hash":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"790b6d61-5837-48d5-89a6-f76add1d03cc\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"metrics-server\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/tmp\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:nodeSelector":{".":{},"f:beta.kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"tmp-dir\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-17T14:08:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.1.5\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"tmp-dir","emptyDir":{}},{"name":"kube-api-access-hkkkl","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"metrics-server","image":"mcr.microsoft.com/oss/kubernetes/metrics-server:v0.4.4","command":["/metrics-server","--kubelet-insecure-tls","--kubelet-preferred-address-types=InternalIP","--tls-cipher-suites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384","--cert-dir=/tmp"],"env":[{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"requests":{"cpu":"44m","memory":"55Mi"}},"volumeMounts":[{"name":"tmp-dir","mountPath":"/tmp"},{"name":"kube-api-access-hkkkl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/livez","port":443,"scheme":"HTTPS"},"initialDelaySeconds":20,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/readyz","port":443,"scheme":"HTTPS"},"initialDelaySeconds":20,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"metrics-server","serviceAccount":"metrics-server","nodeName":"aks-agentpool-17806587-vmss000001","securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"}]}]},"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":100,"preference":{"matchExpressions":[{"key":"kubernetes.azure.com/mode","operator":"In","values":["system"]}]}}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:56Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-17T14:08:46Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-17T14:08:46Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:56Z"}],"hostIP":"10.240.0.5","podIP":"10.244.1.5","podIPs":[{"ip":"10.244.1.5"}],"startTime":"2021-08-12T18:41:56Z","containerStatuses":[{"name":"metrics-server","state":{"running":{"startedAt":"2021-08-12T18:43:18Z"}},"lastState":{"terminated":{"exitCode":2,"reason":"Error","startedAt":"2021-08-12T18:42:32Z","finishedAt":"2021-08-12T18:43:02Z","containerID":"containerd://1cd542af817f126cc49ce83795bf0a1f872721e084b210bc7dbbc57225e8cafc"}},"ready":true,"restartCount":2,"image":"mcr.microsoft.com/oss/kubernetes/metrics-server:v0.4.4","imageID":"sha256:9f03fcfa3f2578de670b0fb874228090ccb6c45fb4b4e6fcca9263964a93f482","containerID":"containerd://7cdfef9a2a7c3033ef4078e105e2dc0efed54b4d2a2dbc704fea4b9ba87c25df","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"omsagent-rrztq","generateName":"omsagent-","namespace":"kube-system","uid":"1f4f3238-3dd4-4a2b-8e59-173afa56eeeb","resourceVersion":"943","creationTimestamp":"2021-08-12T18:41:44Z","labels":{"component":"oms-agent","controller-revision-hash":"789445c7bd","kubernetes.azure.com/managedby":"aks","pod-template-generation":"1","tier":"node"},"annotations":{"WSID":"MjRkNjQ1NjQtYmFhYi00ZDczLThjZDUtYzY4NGUwM2ZiMWNj","agentVersion":"1.10.0.1","dockerProviderVersion":"16.0.0-0","schema-versions":"v1"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"omsagent","uid":"979716f1-d804-4463-bdec-90204ebb4ee1","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:WSID":{},"f:agentVersion":{},"f:dockerProviderVersion":{},"f:schema-versions":{}},"f:generateName":{},"f:labels":{".":{},"f:component":{},"f:controller-revision-hash":{},"f:kubernetes.azure.com/managedby":{},"f:pod-template-generation":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"979716f1-d804-4463-bdec-90204ebb4ee1\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"omsagent\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"AKS_CLUSTER_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"AKS_NODE_RESOURCE_GROUP\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"AKS_REGION\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"AKS_RESOURCE_ID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"AZMON_CONTAINERLOGS_ONEAGENT_REGIONS\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CONTROLLER_TYPE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"FBIT_SERVICE_FLUSH_INTERVAL\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NODE_IP\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"USER_ASSIGNED_IDENTITY_CLIENT_ID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"USING_AAD_MSI_AUTH\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":25224,\"protocol\":\"UDP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":25225,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:privileged":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/config/settings\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/config/settings/adx\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/kubernetes/host\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/omsagent-secret\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/hostfs\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/mnt/containers\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/mnt/docker\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/var/lib/docker/containers\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/var/log\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/run/host\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsConfig":{".":{},"f:options":{}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"azure-json-path\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"container-hostname\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"containerlog-path\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"containerlog-path-2\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"containerlog-path-3\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"docker-sock\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"host-log\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"host-root\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"omsagent-adx-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"omsagent-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"osm-settings-vol-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{},"f:optional":{}},"f:name":{}},"k:{\"name\":\"settings-vol-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{},"f:optional":{}},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.1.2\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"host-root","hostPath":{"path":"/","type":""}},{"name":"docker-sock","hostPath":{"path":"/var/run","type":""}},{"name":"container-hostname","hostPath":{"path":"/etc/hostname","type":""}},{"name":"host-log","hostPath":{"path":"/var/log","type":""}},{"name":"containerlog-path","hostPath":{"path":"/var/lib/docker/containers","type":""}},{"name":"containerlog-path-2","hostPath":{"path":"/mnt/docker","type":""}},{"name":"containerlog-path-3","hostPath":{"path":"/mnt/containers","type":""}},{"name":"azure-json-path","hostPath":{"path":"/etc/kubernetes","type":""}},{"name":"omsagent-secret","secret":{"secretName":"omsagent-secret","defaultMode":420}},{"name":"settings-vol-config","configMap":{"name":"container-azm-ms-agentconfig","defaultMode":420,"optional":true}},{"name":"omsagent-adx-secret","secret":{"secretName":"omsagent-adx-secret","defaultMode":420,"optional":true}},{"name":"osm-settings-vol-config","configMap":{"name":"container-azm-ms-osmconfig","defaultMode":420,"optional":true}},{"name":"kube-api-access-4zptf","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"omsagent","image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06112021-1","ports":[{"containerPort":25225,"protocol":"TCP"},{"containerPort":25224,"protocol":"UDP"}],"env":[{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"FBIT_SERVICE_FLUSH_INTERVAL","value":"15"},{"name":"AKS_CLUSTER_NAME","value":"agrare-aks"},{"name":"AKS_RESOURCE_ID","value":"/subscriptions/AZURE_SUBSCRIPTION_ID/resourceGroups/agrare-resource-group/providers/Microsoft.ContainerService/managedClusters/agrare-aks"},{"name":"AKS_NODE_RESOURCE_GROUP","value":"MC_agrare-resource-group_agrare-aks_eastus2"},{"name":"AKS_REGION","value":"eastus2"},{"name":"CONTROLLER_TYPE","value":"DaemonSet"},{"name":"USER_ASSIGNED_IDENTITY_CLIENT_ID","value":"58d11f7c-1f72-48f9-a41a-0885780785b0"},{"name":"AZMON_CONTAINERLOGS_ONEAGENT_REGIONS","value":"koreacentral,norwayeast,eastus2"},{"name":"USING_AAD_MSI_AUTH","value":"false"},{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"500m","memory":"600Mi"},"requests":{"cpu":"75m","memory":"225Mi"}},"volumeMounts":[{"name":"host-root","readOnly":true,"mountPath":"/hostfs"},{"name":"docker-sock","mountPath":"/var/run/host"},{"name":"host-log","mountPath":"/var/log"},{"name":"containerlog-path","readOnly":true,"mountPath":"/var/lib/docker/containers"},{"name":"containerlog-path-2","readOnly":true,"mountPath":"/mnt/docker"},{"name":"containerlog-path-3","readOnly":true,"mountPath":"/mnt/containers"},{"name":"azure-json-path","mountPath":"/etc/kubernetes/host"},{"name":"omsagent-secret","readOnly":true,"mountPath":"/etc/omsagent-secret"},{"name":"settings-vol-config","readOnly":true,"mountPath":"/etc/config/settings"},{"name":"omsagent-adx-secret","readOnly":true,"mountPath":"/etc/config/settings/adx"},{"name":"kube-api-access-4zptf","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/bin/bash","-c","/opt/livenessprobe.sh"]},"initialDelaySeconds":60,"timeoutSeconds":15,"periodSeconds":60,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"omsagent","serviceAccount":"omsagent","nodeName":"aks-agentpool-17806587-vmss000001","securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["aks-agentpool-17806587-vmss000001"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists","effect":"NoExecute"},{"operator":"Exists","effect":"NoSchedule"},{"operator":"Exists","effect":"PreferNoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"dnsConfig":{"options":[{"name":"ndots","value":"3"}]},"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:45Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:51Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:51Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:41:44Z"}],"hostIP":"10.240.0.5","podIP":"10.244.1.2","podIPs":[{"ip":"10.244.1.2"}],"startTime":"2021-08-12T18:41:45Z","containerStatuses":[{"name":"omsagent","state":{"running":{"startedAt":"2021-08-12T18:41:50Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06112021-1","imageID":"sha256:2453d376ae0813fa210803ff67f69087aee5bc2f433abb1ac56b71290fb78243","containerID":"containerd://ab08d595ed7a8a630a861fd9b6089a8bd8ff27aed850442c5b1bce2c078f2c29","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"omsagent-rs-bcbcbd8cb-g7h6b","generateName":"omsagent-rs-bcbcbd8cb-","namespace":"kube-system","uid":"4a369d96-669f-428d-8b8f-cfa97c2d86a9","resourceVersion":"3883","creationTimestamp":"2021-08-12T18:56:57Z","labels":{"kubernetes.azure.com/managedby":"aks","pod-template-hash":"bcbcbd8cb","rsName":"omsagent-rs"},"annotations":{"WSID":"MjRkNjQ1NjQtYmFhYi00ZDczLThjZDUtYzY4NGUwM2ZiMWNj","agentVersion":"1.10.0.1","cluster-autoscaler.kubernetes.io/safe-to-evict":"true","dockerProviderVersion":"16.0.0-0","schema-versions":"v1"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"omsagent-rs-bcbcbd8cb","uid":"1b2fc6c4-6c4f-4195-bb3e-1af17b2fc853","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:56:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:WSID":{},"f:agentVersion":{},"f:cluster-autoscaler.kubernetes.io/safe-to-evict":{},"f:dockerProviderVersion":{},"f:schema-versions":{}},"f:generateName":{},"f:labels":{".":{},"f:kubernetes.azure.com/managedby":{},"f:pod-template-hash":{},"f:rsName":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"1b2fc6c4-6c4f-4195-bb3e-1af17b2fc853\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"omsagent\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"AKS_CLUSTER_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"AKS_NODE_RESOURCE_GROUP\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"AKS_REGION\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"AKS_RESOURCE_ID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CONTROLLER_TYPE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NODE_IP\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"SIDECAR_SCRAPING_ENABLED\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"USER_ASSIGNED_IDENTITY_CLIENT_ID\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"USING_AAD_MSI_AUTH\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":25224,\"protocol\":\"UDP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":25225,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":25227,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:privileged":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/config\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/config/osm-settings\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/config/settings\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/config/settings/adx\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/kubernetes/host\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/omsagent-secret\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/var/log\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/run/host\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"azure-json-path\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"container-hostname\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"docker-sock\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"host-log\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"omsagent-adx-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"omsagent-rs-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"omsagent-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"osm-settings-vol-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{},"f:optional":{}},"f:name":{}},"k:{\"name\":\"settings-vol-config\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{},"f:optional":{}},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:56:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.1.6\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"docker-sock","hostPath":{"path":"/var/run","type":""}},{"name":"container-hostname","hostPath":{"path":"/etc/hostname","type":""}},{"name":"host-log","hostPath":{"path":"/var/log","type":""}},{"name":"azure-json-path","hostPath":{"path":"/etc/kubernetes","type":""}},{"name":"omsagent-secret","secret":{"secretName":"omsagent-secret","defaultMode":420}},{"name":"omsagent-rs-config","configMap":{"name":"omsagent-rs-config","defaultMode":420}},{"name":"settings-vol-config","configMap":{"name":"container-azm-ms-agentconfig","defaultMode":420,"optional":true}},{"name":"omsagent-adx-secret","secret":{"secretName":"omsagent-adx-secret","defaultMode":420,"optional":true}},{"name":"osm-settings-vol-config","configMap":{"name":"container-azm-ms-osmconfig","defaultMode":420,"optional":true}},{"name":"kube-api-access-d7n4q","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"omsagent","image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06112021-1","ports":[{"containerPort":25225,"protocol":"TCP"},{"containerPort":25224,"protocol":"UDP"},{"name":"in-rs-tcp","containerPort":25227,"protocol":"TCP"}],"env":[{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"AKS_CLUSTER_NAME","value":"agrare-aks"},{"name":"AKS_RESOURCE_ID","value":"/subscriptions/AZURE_SUBSCRIPTION_ID/resourceGroups/agrare-resource-group/providers/Microsoft.ContainerService/managedClusters/agrare-aks"},{"name":"AKS_NODE_RESOURCE_GROUP","value":"MC_agrare-resource-group_agrare-aks_eastus2"},{"name":"AKS_REGION","value":"eastus2"},{"name":"CONTROLLER_TYPE","value":"ReplicaSet"},{"name":"USER_ASSIGNED_IDENTITY_CLIENT_ID","value":"58d11f7c-1f72-48f9-a41a-0885780785b0"},{"name":"SIDECAR_SCRAPING_ENABLED","value":"false"},{"name":"USING_AAD_MSI_AUTH","value":"false"},{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"limits":{"cpu":"1","memory":"1Gi"},"requests":{"cpu":"150m","memory":"250Mi"}},"volumeMounts":[{"name":"docker-sock","mountPath":"/var/run/host"},{"name":"host-log","mountPath":"/var/log"},{"name":"azure-json-path","mountPath":"/etc/kubernetes/host"},{"name":"omsagent-secret","readOnly":true,"mountPath":"/etc/omsagent-secret"},{"name":"omsagent-rs-config","mountPath":"/etc/config"},{"name":"settings-vol-config","readOnly":true,"mountPath":"/etc/config/settings"},{"name":"omsagent-adx-secret","readOnly":true,"mountPath":"/etc/config/settings/adx"},{"name":"osm-settings-vol-config","readOnly":true,"mountPath":"/etc/config/osm-settings"},{"name":"kube-api-access-d7n4q","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/bin/bash","-c","/opt/livenessprobe.sh"]},"initialDelaySeconds":60,"timeoutSeconds":15,"periodSeconds":60,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"omsagent","serviceAccount":"omsagent","nodeName":"aks-agentpool-17806587-vmss000001","securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"beta.kubernetes.io/os","operator":"In","values":["linux"]},{"key":"kubernetes.io/role","operator":"In","values":["agent"]},{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]}]}]},"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":100,"preference":{"matchExpressions":[{"key":"kubernetes.azure.com/mode","operator":"In","values":["system"]}]}},{"weight":1,"preference":{"matchExpressions":[{"key":"storageprofile","operator":"NotIn","values":["managed"]}]}}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:56:57Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:56:58Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:56:58Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-12T18:56:57Z"}],"hostIP":"10.240.0.5","podIP":"10.244.1.6","podIPs":[{"ip":"10.244.1.6"}],"startTime":"2021-08-12T18:56:57Z","containerStatuses":[{"name":"omsagent","state":{"running":{"startedAt":"2021-08-12T18:56:58Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod06112021-1","imageID":"sha256:2453d376ae0813fa210803ff67f69087aee5bc2f433abb1ac56b71290fb78243","containerID":"containerd://f0c85a66417054ff5144ca8b343944042a4c3d53f8ba33e3265e780bfb990f5c","started":true}],"qosClass":"Burstable"}},{"metadata":{"name":"tunnelfront-6754b444df-5wm96","generateName":"tunnelfront-6754b444df-","namespace":"kube-system","uid":"96093991-24ee-4873-989f-dbc00faea99e","resourceVersion":"1311863","creationTimestamp":"2021-08-18T10:16:18Z","labels":{"component":"tunnel","pod-template-hash":"6754b444df"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"tunnelfront-6754b444df","uid":"0520e77e-fa93-4c99-8330-c4d4cf962aeb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-18T10:16:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:generateName":{},"f:labels":{".":{},"f:component":{},"f:pod-template-hash":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"0520e77e-fa93-4c99-8330-c4d4cf962aeb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:nodeAffinity":{".":{},"f:preferredDuringSchedulingIgnoredDuringExecution":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{".":{},"f:nodeSelectorTerms":{}}}},"f:containers":{"k:{\"name\":\"tunnel-front\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"AWK_CMD\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"IPTABLES_CMD\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"IPTABLES_SAVE_CMD\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"KUBE_CONFIG\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"OVERRIDE_TUNNEL_SERVER_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:resources":{".":{},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:privileged":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/kubernetes/certs\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/kubernetes/kubeconfig\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/kubernetes/tunnelfront-tls\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:nodeSelector":{".":{},"f:beta.kubernetes.io/os":{}},"f:priorityClassName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{},"f:volumes":{".":{},"k:{\"name\":\"certificates\"}":{".":{},"f:hostPath":{".":{},"f:path":{},"f:type":{}},"f:name":{}},"k:{\"name\":\"kubeconfig\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{},"f:optional":{}},"f:name":{}},"k:{\"name\":\"tunnelfront-tls\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-08-18T10:16:19Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.1.9\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"kubeconfig","configMap":{"name":"tunnelfront-kubecfg","defaultMode":420,"optional":true}},{"name":"tunnelfront-tls","secret":{"secretName":"tunnelfront-tls","defaultMode":420,"optional":true}},{"name":"certificates","hostPath":{"path":"/etc/kubernetes/certs","type":""}},{"name":"kube-api-access-lpr7w","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"tunnel-front","image":"mcr.microsoft.com/aks/hcp/hcp-tunnel-front:master.210721.1","env":[{"name":"IPTABLES_CMD","value":"iptables-legacy"},{"name":"AWK_CMD","value":"gawk"},{"name":"IPTABLES_SAVE_CMD","value":"iptables-legacy-save"},{"name":"OVERRIDE_TUNNEL_SERVER_NAME","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBE_CONFIG","value":"/etc/kubernetes/kubeconfig/kubeconfig"},{"name":"KUBERNETES_PORT_443_TCP_ADDR","value":"AZURE_AKS_HOSTNAME"},{"name":"KUBERNETES_PORT","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_PORT_443_TCP","value":"tcp://AZURE_AKS_HOSTNAME:443"},{"name":"KUBERNETES_SERVICE_HOST","value":"AZURE_AKS_HOSTNAME"}],"resources":{"requests":{"cpu":"10m","memory":"64Mi"}},"volumeMounts":[{"name":"kubeconfig","readOnly":true,"mountPath":"/etc/kubernetes/kubeconfig"},{"name":"tunnelfront-tls","readOnly":true,"mountPath":"/etc/kubernetes/tunnelfront-tls"},{"name":"certificates","readOnly":true,"mountPath":"/etc/kubernetes/certs"},{"name":"kube-api-access-lpr7w","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/lib/tunnel-front/check-tunnel-connection.sh"]},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":60,"successThreshold":1,"failureThreshold":12},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"Default","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"tunnelfront","serviceAccount":"tunnelfront","nodeName":"aks-agentpool-17806587-vmss000001","securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"}]}]},"preferredDuringSchedulingIgnoredDuringExecution":[{"weight":100,"preference":{"matchExpressions":[{"key":"kubernetes.azure.com/mode","operator":"In","values":["system"]}]}}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":30},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-18T10:16:18Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-18T10:16:19Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-18T10:16:19Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-08-18T10:16:18Z"}],"hostIP":"10.240.0.5","podIP":"10.244.1.9","podIPs":[{"ip":"10.244.1.9"}],"startTime":"2021-08-18T10:16:18Z","containerStatuses":[{"name":"tunnel-front","state":{"running":{"startedAt":"2021-08-18T10:16:18Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"mcr.microsoft.com/aks/hcp/hcp-tunnel-front:master.210721.1","imageID":"sha256:2246a74a25b2ce69302f7d73c9dbeb06fa4195de8c0a08cb9724a008f6eacd9a","containerID":"containerd://8c95ea21bcb6a7367c291e57091abc84e46fbff4ce05156131000f857ea05c2a","started":true}],"qosClass":"Burstable"}}]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/services?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - e61d2efd-1231-459b-8925-7b0c97502355
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:35 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"kind":"ServiceList","apiVersion":"v1","metadata":{"resourceVersion":"1384683"},"items":[{"metadata":{"name":"kubernetes","namespace":"default","uid":"dacd27a8-d1c8-4b7d-905f-c522324de5ee","resourceVersion":"207","creationTimestamp":"2021-08-12T18:40:28Z","labels":{"component":"apiserver","provider":"kubernetes"},"managedFields":[{"manager":"kube-apiserver","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:40:28Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:component":{},"f:provider":{}}},"f:spec":{"f:clusterIP":{},"f:ipFamilyPolicy":{},"f:ports":{".":{},"k:{\"port\":443,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"https","protocol":"TCP","port":443,"targetPort":443}],"clusterIP":"10.0.0.1","clusterIPs":["10.0.0.1"],"type":"ClusterIP","sessionAffinity":"None","ipFamilies":["IPv4"],"ipFamilyPolicy":"SingleStack"},"status":{"loadBalancer":{}}},{"metadata":{"name":"healthmodel-replicaset-service","namespace":"kube-system","uid":"1405dc5d-c629-4bfc-b528-1614336aee62","resourceVersion":"555","creationTimestamp":"2021-08-12T18:41:04Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","kubernetes.io/cluster-service":"true"},"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"kubernetes.io/cluster-service\":\"true\"},\"name\":\"healthmodel-replicaset-service\",\"namespace\":\"kube-system\"},\"spec\":{\"ports\":[{\"port\":25227,\"protocol\":\"TCP\",\"targetPort\":\"in-rs-tcp\"}],\"selector\":{\"rsName\":\"omsagent-rs\"}}}\n"},"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:addonmanager.kubernetes.io/mode":{},"f:kubernetes.io/cluster-service":{}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":25227,\"protocol\":\"TCP\"}":{".":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:rsName":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"protocol":"TCP","port":25227,"targetPort":"in-rs-tcp"}],"selector":{"rsName":"omsagent-rs"},"clusterIP":"10.0.91.34","clusterIPs":["10.0.91.34"],"type":"ClusterIP","sessionAffinity":"None","ipFamilies":["IPv4"],"ipFamilyPolicy":"SingleStack"},"status":{"loadBalancer":{}}},{"metadata":{"name":"kube-dns","namespace":"kube-system","uid":"064c713f-6e88-4947-baf1-21f57a6b2902","resourceVersion":"450","creationTimestamp":"2021-08-12T18:41:03Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","kubernetes.io/name":"CoreDNS"},"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"k8s-app\":\"kube-dns\",\"kubernetes.io/cluster-service\":\"true\",\"kubernetes.io/name\":\"CoreDNS\"},\"name\":\"kube-dns\",\"namespace\":\"kube-system\"},\"spec\":{\"clusterIP\":\"10.0.0.10\",\"ports\":[{\"name\":\"dns\",\"port\":53,\"protocol\":\"UDP\"},{\"name\":\"dns-tcp\",\"port\":53,\"protocol\":\"TCP\"}],\"selector\":{\"k8s-app\":\"kube-dns\"}}}\n"},"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:03Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:addonmanager.kubernetes.io/mode":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":53,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":53,\"protocol\":\"UDP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:k8s-app":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"dns","protocol":"UDP","port":53,"targetPort":53},{"name":"dns-tcp","protocol":"TCP","port":53,"targetPort":53}],"selector":{"k8s-app":"kube-dns"},"clusterIP":"10.0.0.10","clusterIPs":["10.0.0.10"],"type":"ClusterIP","sessionAffinity":"None","ipFamilies":["IPv4"],"ipFamilyPolicy":"SingleStack"},"status":{"loadBalancer":{}}},{"metadata":{"name":"metrics-server","namespace":"kube-system","uid":"f9111c4f-5225-4517-858f-5816404dd82c","resourceVersion":"507","creationTimestamp":"2021-08-12T18:41:04Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","kubernetes.io/cluster-service":"true","kubernetes.io/name":"Metrics-server"},"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"kubernetes.io/cluster-service\":\"true\",\"kubernetes.io/name\":\"Metrics-server\"},\"name\":\"metrics-server\",\"namespace\":\"kube-system\"},\"spec\":{\"ports\":[{\"port\":443,\"protocol\":\"TCP\",\"targetPort\":443}],\"selector\":{\"k8s-app\":\"metrics-server\"}}}\n"},"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:addonmanager.kubernetes.io/mode":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":443,\"protocol\":\"TCP\"}":{".":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:k8s-app":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"protocol":"TCP","port":443,"targetPort":443}],"selector":{"k8s-app":"metrics-server"},"clusterIP":"10.0.137.248","clusterIPs":["10.0.137.248"],"type":"ClusterIP","sessionAffinity":"None","ipFamilies":["IPv4"],"ipFamilyPolicy":"SingleStack"},"status":{"loadBalancer":{}}}]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:35 GMT
- request:
    method: get
    uri: https://azure-aks-hostname/api/v1/endpoints?limit=1000
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - rest-client/2.1.0 (linux-gnu x86_64) ruby/2.7.4p191
      Authorization:
      - Bearer AZURE_AKS_TOKEN
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Audit-Id:
      - 49f884c8-e321-4aea-95ee-d2f8037e44d4
      Cache-Control:
      - no-cache, private
      Content-Type:
      - application/json
      X-Kubernetes-Pf-Flowschema-Uid:
      - 27e329d2-a013-4760-99e3-347323769eb0
      X-Kubernetes-Pf-Prioritylevel-Uid:
      - 0a5c5439-3d67-45b9-bb93-f775a107fa4e
      Date:
      - Wed, 18 Aug 2021 17:48:36 GMT
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"kind":"EndpointsList","apiVersion":"v1","metadata":{"resourceVersion":"1384683"},"items":[{"metadata":{"name":"kubernetes","namespace":"default","uid":"dedac23d-321a-4cee-944a-39bbeb4a1784","resourceVersion":"209","creationTimestamp":"2021-08-12T18:40:28Z","labels":{"endpointslice.kubernetes.io/skip-mirror":"true"},"managedFields":[{"manager":"kube-apiserver","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:40:28Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:endpointslice.kubernetes.io/skip-mirror":{}}},"f:subsets":{}}}]},"subsets":[{"addresses":[{"ip":"52.253.73.235"}],"ports":[{"name":"https","port":443,"protocol":"TCP"}]}]},{"metadata":{"name":"healthmodel-replicaset-service","namespace":"kube-system","uid":"1c76851b-ebb6-4820-824b-cac45b2c125b","resourceVersion":"3884","creationTimestamp":"2021-08-12T18:41:04Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","kubernetes.io/cluster-service":"true"},"annotations":{"endpoints.kubernetes.io/last-change-trigger-time":"2021-08-12T18:56:58Z"},"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:56:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:addonmanager.kubernetes.io/mode":{},"f:kubernetes.io/cluster-service":{}}},"f:subsets":{}}}]},"subsets":[{"addresses":[{"ip":"10.244.1.6","nodeName":"aks-agentpool-17806587-vmss000001","targetRef":{"kind":"Pod","namespace":"kube-system","name":"omsagent-rs-bcbcbd8cb-g7h6b","uid":"4a369d96-669f-428d-8b8f-cfa97c2d86a9","resourceVersion":"3883"}}],"ports":[{"port":25227,"protocol":"TCP"}]}]},{"metadata":{"name":"kube-dns","namespace":"kube-system","uid":"08edad76-a41a-4a7d-9c1c-498c9d9ef5da","resourceVersion":"6633","creationTimestamp":"2021-08-12T18:41:03Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","kubernetes.io/name":"CoreDNS"},"annotations":{"endpoints.kubernetes.io/last-change-trigger-time":"2021-08-12T19:12:13Z"},"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T19:12:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:addonmanager.kubernetes.io/mode":{},"f:k8s-app":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:subsets":{}}}]},"subsets":[{"addresses":[{"ip":"10.244.1.7","nodeName":"aks-agentpool-17806587-vmss000001","targetRef":{"kind":"Pod","namespace":"kube-system","name":"coredns-8869cbf9b-qtsm7","uid":"e3b80b65-a247-4fe6-b173-28b32f1e1e19","resourceVersion":"3987"}},{"ip":"10.244.1.8","nodeName":"aks-agentpool-17806587-vmss000001","targetRef":{"kind":"Pod","namespace":"kube-system","name":"coredns-8869cbf9b-2kqg2","uid":"c96e66cc-7f5c-45df-9edb-2f80bb9d37a8","resourceVersion":"6632"}}],"ports":[{"name":"dns-tcp","port":53,"protocol":"TCP"},{"name":"dns","port":53,"protocol":"UDP"}]}]},{"metadata":{"name":"metrics-server","namespace":"kube-system","uid":"3e54577d-6a25-4104-a243-c05dc9e61bc7","resourceVersion":"1117593","creationTimestamp":"2021-08-12T18:41:04Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","kubernetes.io/cluster-service":"true","kubernetes.io/name":"Metrics-server"},"annotations":{"endpoints.kubernetes.io/last-change-trigger-time":"2021-08-12T18:41:04Z"},"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-08-12T18:41:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:endpoints.kubernetes.io/last-change-trigger-time":{}},"f:labels":{".":{},"f:addonmanager.kubernetes.io/mode":{},"f:kubernetes.io/cluster-service":{},"f:kubernetes.io/name":{}}},"f:subsets":{}}}]},"subsets":[{"addresses":[{"ip":"10.244.1.5","nodeName":"aks-agentpool-17806587-vmss000001","targetRef":{"kind":"Pod","namespace":"kube-system","name":"metrics-server-7f469c787-4cd7r","uid":"1001c0d7-7603-4eb3-adbd-8bdf25be5d82","resourceVersion":"1117587"}}],"ports":[{"port":443,"protocol":"TCP"}]}]}]}

        '
    http_version: null
  recorded_at: Wed, 18 Aug 2021 17:48:36 GMT
recorded_with: VCR 5.1.0
